angular.module("ngCordova.plugins.nativeStorage",[]).factory("$cordovaNativeStorage",["$window","$q","$log",function(e,r,o){function t(){return f||((u=e.cordova&&"browser"===e.cordova.platformId||!(e.phonegap||e.cordova))?o.log("NativeStorageWrapper: isInBrowser"):o.log("NativeStorageWrapper: isNotInBrowser"),f=!0),u}function n(r,o,t,n){try{var c=JSON.stringify(o);e.localStorage[r]=c,t(o)}catch(e){n(e)}}function c(r,o,t){try{var n=e.localStorage[r];if(void 0==n)throw new Error(r+": undefined");o(JSON.parse(n))}catch(e){t(e)}}function a(r,o,t){try{e.localStorage.removeItem(r),o(null)}catch(e){t(e)}}function i(r,o){try{for(var t=[],n=0;n<e.localStorage.length;++n)t.push(localStorage.key(n));r(t)}catch(e){o(e)}}var u=!1,f=!1;return{remove:function(e){var o=r.defer();return t()?a(e,function(e){o.resolve(e)},function(e){o.reject(e)}):NativeStorage.remove(e,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},setItem:function(e,o){var c=r.defer();return t()?n(e,o,function(e){c.resolve(e)},function(e){c.reject(e)}):NativeStorage.setItem(e,o,function(e){c.resolve(e)},function(e){c.reject(e)}),c.promise},getItem:function(e){var o=r.defer();return t()?c(e,function(e){o.resolve(e)},function(e){o.reject(e)}):NativeStorage.getItem(e,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},getKeys:function(){var e=r.defer();return t()?i(function(r){e.resolve(r)},function(r){e.reject(r)}):NativeStorage.keys(function(r){e.resolve(r)},function(r){e.reject(r)}),e.promise},clear:function(){var e=r.defer();return t()?clearFromLocalStorage(function(r){e.resolve(r)},function(r){e.reject(r)}):NativeStorage.clear(function(r){e.resolve(r)},function(r){e.reject(r)}),e.promise}}}]);
